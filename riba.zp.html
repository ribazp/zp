<!DOCTYPE html>
<html lang="ua">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è —Ä–∏–±–∏</title>
    
    <style>
        /* –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Å–±—Ä–æ—Å –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        #payment-widget, #infoForm, #paymentInfo, .input-group, .fish-options-simple {
            box-sizing: border-box;
            font-family: Arial, sans-serif;
            margin: 0; 
            padding: 0;
            max-width: 100%;
            font-size: 14px;
        }
        
        #payment-widget {
            overflow: hidden !important; 
        }
        
        #infoForm, #paymentInfo {
            width: 100%;
            max-width: 400px;
            margin: 0 auto; 
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        
        h2, h3, h4 {
            font-size: 1em;
            margin: 10px 0 5px 0; 
            font-weight: bold;
            display: block;
        }

        .language-switcher {
            text-align: right;
            max-width: 400px;
            width: 100%;
            margin: 0 auto;
            padding: 0 15px 10px 0; 
        }
        .language-switcher button {
            padding: 5px 10px; 
            border: 1px solid #ccc;
            cursor: pointer;
            font-size: 0.9em;
        }
        .language-switcher button.active {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        .input-group label {
            display: block;
            font-weight: bold;
            margin-top: 10px;
            margin-bottom: 3px;
        }
        .input-group input {
            width: 100%;
            padding: 8px; 
            border: 1px solid #ddd;
            border-radius: 3px;
        }

        .fish-options-simple {
            padding: 10px;
            border: 1px solid #eee;
            margin-top: 10px;
        }
        .fish-options-simple label {
            margin-bottom: 5px;
            display: block;
            cursor: pointer;
        }
        
        .submit-button {
            background-color: #007bff;
            color: white;
            padding: 10px;
            border-radius: 4px;
            width: 100%;
            margin-top: 15px; 
            cursor: pointer; 
            border: none;
        }

        .comment-box {
            border: 1px dashed #f0ad4e;
            padding: 10px;
            margin: 10px 0;
        }
        .copy-target {
            opacity: 0;
            height: 1px;
            width: 1px;
            position: absolute;
            left: -9999px;
            top: -9999px;
        }
        .comment-text {
            padding: 5px;
            margin-top: 5px;
            font-weight: bold;
            word-break: break-all;
            display: block;
        }
        
        #paymentInfo p {
            margin: 8px 0;
        }

        #paymentInfo button.copy-button {
            padding: 6px 10px;
            font-size: 0.9em;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 3px;
            margin-top: 5px;
            display: block;
            width: 100%;
            cursor: pointer;
        }
        
        #viber-link-container {
            text-align: center;
            margin-top: 25px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        #viber-link-container a {
            font-size: 1.1em;
            color: #665eff;
            text-decoration: underline;
            font-weight: bold;
        }
        
        #geo-warning {
            text-align: center;
            margin-top: 15px;
            padding: 5px;
            font-size: 0.9em;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            word-break: break-all;
        }
        #geo-warning a {
            color: #d9534f;
        }
    </style>
</head>
<body>

<div id="payment-widget">
    
    <div class="language-switcher">
        <button data-lang="ru">RU</button> 
        <button data-lang="ua" class="active">UA</button> 
    </div>
    
    <div id="infoForm">
        <h2 data-key="title_step1">–ó—Ä–æ–±—ñ—Ç—å –≤–∏–±—ñ—Ä —Ç–∞ –≤–≤–µ–¥—ñ—Ç—å –¥–∞–Ω—ñ</h2>
        
        <div class="input-group">
            <label for="first_name" data-key="label_name">–Ü–º'—è:</label>
            <input type="text" id="first_name" name="first_name">
        </div>

        <div class="input-group">
            <label for="last_name" data-key="label_surname">–ü—Ä—ñ–∑–≤–∏—â–µ:</label>
            <input type="text" id="last_name" name="last_name">
        </div>

        <h3 data-key="title_fish_select">üê† –û–±–µ—Ä—ñ—Ç—å —Ä–∏–±—É:</h3>
        <div class="fish-options-simple">
            <label><input type="radio" name="fish_choice" value="Carp_150" data-price="150" data-name_ru="–ö–∞—Ä–ø" data-name_ua="–ö–æ—Ä–æ–ø"><span data-key="fish_carp_150">–ö–æ—Ä–æ–ø 150 –≥—Ä–Ω.</span></label>
            
            <label><input type="radio" name="fish_choice" value="PikePerch_170" data-price="170" data-name_ru="–°—É–¥–∞–∫" data-name_ua="–°—É–¥–∞–∫"><span data-key="fish_pikeperch_170">–°—É–¥–∞–∫ 170 –≥—Ä–Ω.</span></label>
            </div>

        <button id="nextStepBtn" class="submit-button" data-key="btn_next">–î–∞–ª—ñ (–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –æ–ø–ª–∞—Ç–∏)</button>
    </div>
    
    <div id="paymentInfo" style="display: none;">
        <h3 data-key="title_step2"> –ü–µ—Ä–µ–∫–∞–∑ –∫–æ—à—Ç—ñ–≤ —Ç–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä</h3>
        
        <p>
            <strong data-key="label_card_num">1. –ù–æ–º–µ—Ä –∫–∞—Ä—Ç–∫–∏ –¥–ª—è –ø–µ—Ä–µ–∫–∞–∑—É:</strong> 
            <span id="cardNumberDisplay">5457 0825 2701 8902</span> 
            <input type="text" id="cardCopyTarget" class="copy-target" readonly> 
            <button data-copy-target="card" class="copy-button" data-key="btn_copy_card">–ö–∞—Ä—Ç–∫–∞</button>
        </p>
        
        <p>
            <strong data-key="label_sum">2. –°—É–º–∞ –¥–æ —Å–ø–ª–∞—Ç–∏:</strong> 
            <span id="paymentAmount" style="color: #28a745; font-weight: bold;">0 –≥—Ä–Ω.</span>
        </p>

        <div class="comment-box">
            <h4 data-key="title_comment">3. –û–ë–û–í'–Ø–ó–ö–û–í–ò–ô –ö–û–ú–ï–ù–¢–ê–† (—Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ç–∞ –≤—Å—Ç–∞–≤–∏—Ç–∏ –ø—Ä–∏ –æ–ø–ª–∞—Ç—ñ!):</h4>
            <p id="paymentComment" class="comment-text">
                </p>
            <input type="text" id="commentCopyTarget" class="copy-target" readonly>
            <button data-copy-target="comment" class="copy-button" data-key="btn_copy_comment">–ö–æ–º–µ–Ω—Ç–∞—Ä</button>
        </div>
        
        <p class="recipient">
            <strong data-key="label_recipient">–û—Ç—Ä–∏–º—É–≤–∞—á:</strong> <span id="recipientName">–ö–ª–µ–≤—Ü–æ–≤–∞ –õ –í</span>
        </p>
    </div>
</div>

<div id="viber-link-container">
    <a href="https://invite.viber.com/?g2=AQAvK3qdePG0wkvIBjEACznNoyED7TDWDQur53X8axv6jaNNhELS6giOqf%2FvrrfX" target="_blank" data-key="viber_link_text">
        –ó–∞–º–æ–≤–∏—Ç–∏ —á–µ—Ä–µ–∑ Viber
    </a>
</div>

<div id="geo-warning">
    <a href="https://maps.app.goo.gl/Y5xC8i7CP7e8psJE7" target="_blank">https://maps.app.goo.gl/Y5xC8i7CP7e8psJE7</a>
</div>

<script>
    // –ñ–¥–µ–º –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    document.addEventListener('DOMContentLoaded', function() {
        const translations = {
            ru: {
                title_step1: "–°–¥–µ–ª–∞–π—Ç–µ –≤—ã–±–æ—Ä –∏ –≤–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ", label_name: "–ò–º—è:", label_surname: "–§–∞–º–∏–ª–∏—è:",
                title_fish_select: "üê† –í—ã–±–µ—Ä–∏—Ç–µ —Ä—ã–±—É:", 
                fish_carp_150: "–ö–∞—Ä–ø 150 –≥—Ä–Ω.",
                fish_pikeperch_170: "–°—É–¥–∞–∫ 170 –≥—Ä–Ω.",

                btn_next: "–î–∞–ª–µ–µ (–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ)", title_step2: " –ü–µ—Ä–µ–≤–æ–¥ –¥–µ–Ω–µ–≥ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π",
                label_card_num: "1. –ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞:", 
                btn_copy_card: "–ö–∞—Ä—Ç–∞", 
                label_sum: "2. –°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ:", title_comment: "3. –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ô –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ô (—Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ!):",
                btn_copy_comment: "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π", 
                label_recipient: "–ü–æ–ª—É—á–∞—Ç–µ–ª—å:",
                viber_link_text: "–ó–∞–∫–∞–∑–∞—Ç—å —á–µ—Ä–µ–∑ Viber", 
                alert_empty_fields: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ò–º—è, –§–∞–º–∏–ª–∏—é –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ä—ã–±—É!", 
                alert_copied_manual: "–¢–µ–∫—Å—Ç –≤—ã–¥–µ–ª–µ–Ω! –î–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞–∂–º–∏—Ç–µ: Ctrl+C (Win) / Cmd+C (Mac) –∏–ª–∏ –¥–æ–ª–≥–æ–µ –Ω–∞–∂–∞—Ç–∏–µ (Mobile)."
            },
            ua: {
                title_step1: "–ó—Ä–æ–±—ñ—Ç—å –≤–∏–±—ñ—Ä —Ç–∞ –≤–≤–µ–¥—ñ—Ç—å –¥–∞–Ω—ñ", label_name: "–Ü–º'—è:", label_surname: "–ü—Ä—ñ–∑–≤–∏—â–µ:",
                title_fish_select: "üê† –û–±–µ—Ä—ñ—Ç—å —Ä–∏–±—É:", 
                fish_carp_150: "–ö–æ—Ä–æ–ø 150 –≥—Ä–Ω.",
                fish_pikeperch_170: "–°—É–¥–∞–∫ 170 –≥—Ä–Ω.",

                btn_next: "–î–∞–ª—ñ (–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –æ–ø–ª–∞—Ç–∏)", title_step2: " –ü–µ—Ä–µ–∫–∞–∑ –∫–æ—à—Ç—ñ–≤ —Ç–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä",
                label_card_num: "1. –ù–æ–º–µ—Ä –∫–∞—Ä—Ç–∫–∏ –¥–ª—è –ø–µ—Ä–µ–∫–∞–∑—É:", 
                btn_copy_card: "–ö–∞—Ä—Ç–∫–∞", 
                label_sum: "2. –°—É–º–∞ –¥–æ —Å–ø–ª–∞—Ç–∏:", title_comment: "3. –û–ë–û–í'–Ø–ó–ö–û–í–ò–ô –ö–û–ú–ï–ù–¢–ê–† (—Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ç–∞ –≤—Å—Ç–∞–≤–∏—Ç–∏ –ø—Ä–∏ –æ–ø–ª–∞—Ç—ñ!):",
                btn_copy_comment: "–ö–æ–º–µ–Ω—Ç–∞—Ä", 
                label_recipient: "–û—Ç—Ä–∏–º—É–≤–∞—á:",
                viber_link_text: "–ó–∞–º–æ–≤–∏—Ç–∏ —á–µ—Ä–µ–∑ Viber", 
                alert_empty_fields: "–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –Ü–º'—è, –ü—Ä—ñ–∑–≤–∏—â–µ —Ç–∞ –æ–±–µ—Ä—ñ—Ç—å —Ä–∏–±—É!", 
                alert_copied_manual: "–¢–µ–∫—Å—Ç –≤–∏–¥—ñ–ª–µ–Ω–æ! –î–ª—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å: Ctrl+C (Win) / Cmd+C (Mac) –∞–±–æ –¥–æ–≤–≥–µ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è (Mobile)."
            }
        };
        let currentLang = 'ua'; 
        // –ö–∞—Ä—Ç–∞ –∏ –ü–æ–ª—É—á–∞—Ç–µ–ª—å
        const cardNumber = '5457082527018902'; 
        const recipientName = '–ö–ª–µ–≤—Ü–æ–≤–∞ –õ –í'; 

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
        function selectAndNotify(targetId, textToCopy) {
            const targetElement = document.getElementById(targetId);
            targetElement.value = textToCopy;
            
            targetElement.style.position = 'absolute';
            targetElement.style.top = '10px';
            targetElement.style.left = '10px';
            targetElement.style.zIndex = '9999';
            targetElement.style.opacity = '0.01'; 

            targetElement.focus();
            targetElement.select(); 
            
            try {
                const success = document.execCommand('copy');
                if (success) {
                     alert(currentLang === 'ua' ? "–°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ!" : "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!");
                } else {
                     throw new Error("Copy failed.");
                }
            } catch (err) {
                alert(translations[currentLang]['alert_copied_manual']);
            }

            // –£–±–∏—Ä–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∏–∑ –≤–∏–¥–∏–º–æ–π –æ–±–ª–∞—Å—Ç–∏
            setTimeout(() => {
                targetElement.style.style = null; 
                targetElement.style.position = 'absolute';
                targetElement.style.top = '-9999px';
                targetElement.style.left = '-9999px';
                targetElement.style.opacity = '0';
            }, 100); 
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤ –ø—Ä–∏ —Å–º–µ–Ω–µ —è–∑—ã–∫–∞
        function updateText(lang) {
            currentLang = lang;
            document.querySelectorAll('[data-key]').forEach(element => {
                const key = element.getAttribute('data-key');
                if (element.tagName !== 'INPUT' && translations[lang] && translations[lang][key]) { 
                    element.innerText = translations[lang][key]; 
                }
            });
            
            const nextButton = document.querySelector('#nextStepBtn');
            if (nextButton) { nextButton.innerText = translations[lang]['btn_next']; }
            
            document.querySelectorAll('.copy-button').forEach(btn => {
                const key = btn.getAttribute('data-key');
                if (translations[lang] && translations[lang][key]) {
                    btn.innerText = translations[lang][key];
                }
            });

            document.querySelectorAll('.language-switcher button').forEach(button => {
                if (button.getAttribute('data-lang') === lang) {
                    button.classList.add('active');
                } else {
                    button.classList.remove('active');
                }
            });
            
            const viberLink = document.querySelector('#viber-link-container a');
            if (viberLink) {
                viberLink.innerText = translations[lang]['viber_link_text'];
            }
        }

        // 1. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞
        document.querySelectorAll('.language-switcher button').forEach(button => {
            button.addEventListener('click', function() {
                updateText(this.getAttribute('data-lang'));
            });
        });
        
        // 2. –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–î–∞–ª–µ–µ" (–ü–µ—Ä–µ—Ö–æ–¥ –∫ –æ–ø–ª–∞—Ç–µ)
        document.getElementById('nextStepBtn').addEventListener('click', function() {
            const firstName = document.getElementById('first_name').value.trim();
            const lastName = document.getElementById('last_name').value.trim();
            const selectedFish = document.querySelector('input[name="fish_choice"]:checked');
            
            if (firstName.length < 1 || lastName.length < 1 || !selectedFish) {
                alert(translations[currentLang]['alert_empty_fields']);
                return;
            }

            const fullName = `${firstName} ${lastName}`.trim();
            const price = selectedFish.getAttribute('data-price');
            const fishNameForComment = currentLang === 'ua' 
                ? selectedFish.getAttribute('data-name_ua') 
                : selectedFish.getAttribute('data-name_ru'); 
                
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–æ—Å—Ç–æ–π ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
            const transactionId = Math.random().toString(36).substring(2, 8).toUpperCase();
            
            const commentTemplate = currentLang === 'ua' 
                ? `–û–ø–ª–∞—Ç–∞ –≤—ñ–¥ ${fullName} –∑–∞ ${fishNameForComment}. ID: ${transactionId}` 
                : `–û–ø–ª–∞—Ç–∞ –æ—Ç ${fullName} –∑–∞ ${fishNameForComment}. ID: ${transactionId}`;

            document.getElementById('paymentAmount').innerText = `${price} –≥—Ä–Ω.`;
            document.getElementById('paymentComment').innerText = commentTemplate;

            document.getElementById('infoForm').style.display = 'none';
            document.getElementById('paymentInfo').style.display = 'block';
        });
        
        // 3. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
        document.querySelectorAll('.copy-button').forEach(button => {
            button.addEventListener('click', function() {
                const target = this.getAttribute('data-copy-target');
                if (target === 'card') {
                    selectAndNotify('cardCopyTarget', cardNumber); 
                } else if (target === 'comment') {
                    selectAndNotify('commentCopyTarget', document.getElementById('paymentComment').innerText); 
                }
            });
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.getElementById('recipientName').innerText = recipientName;
        document.getElementById('cardNumberDisplay').innerText = cardNumber.match(/.{1,4}/g).join(' '); 
        updateText('ua'); // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —É–∫—Ä–∞–∏–Ω—Å–∫–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    });
</script>

</body>
</html>
